"use strict";let browsedMovies=[];const favMovies=[],favList=document.querySelector(".js-fav"),movieList=document.querySelector(".js-list");function selectFavourite(e){const o=parseInt(e.currentTarget.id);if(void 0===favMovies.find(e=>e.show.id===o)){const e=browsedMovies.find(e=>e.show.id===o);favMovies.push(e),localStorage.setItem("movies",JSON.stringify(favMovies))}else{const e=favMovies.find(e=>e.show.id===o);favMovies.splice(e,1),localStorage.setItem("movies",JSON.stringify(favMovies))}addFavourite(),console.log(localStorage)}function addListener(){const e=document.querySelectorAll(".js-movie");for(const o of e)o.addEventListener("click",selectFavourite)}function addFavourite(){let e="";for(let o=0;o<favMovies.length;o++)e+=`<li class="js-fav-item js-fav${o} favourite__list__item" id=${favMovies[o].show.id}1>`,e+=`<img class="js-fav-img${o} favourite__list__img" `,null===favMovies[o].show.image?e+='src= "https://via.placeholder.com/210x295/ffffff/666666/?text=Image"':e+=`src="${favMovies[o].show.image.medium}"`,e+=`alt="${favMovies[o].show.name}" title="${favMovies[o].show.name}">`,e+=favMovies[o].show.name,e+="<li>";favList.innerHTML=e,addRemoveListener()}const btn=document.querySelector(".js-btn");function getMovie(){const e=document.querySelector(".js-input").value;fetch("//api.tvmaze.com/search/shows?q="+e).then((function(e){return e.json()})).then((function(e){browsedMovies=e,addListItem(),addListener(),console.log(browsedMovies)}))}function addListItem(){movieList.innerHTML="";for(let e=0;e<browsedMovies.length;e++){let o="";o+="<li ",o+='class="',o+=`js-movie js-movie${e} movie__list__item" id="${browsedMovies[e].show.id}">`,o+='<img class="',o+=`js-movie-img${e} movie__list__img" `,null===browsedMovies[e].show.image?o+='src= "https://via.placeholder.com/210x295/ffffff/666666/?text=Image"':o+="src = "+browsedMovies[e].show.image.medium,o+=` alt="${browsedMovies[e].show.name}" title="${browsedMovies[e].show.name}">`,o+=""+browsedMovies[e].show.name,o+="</li>",movieList.innerHTML+=o}}function removeFavourite(e){const o=parseInt(e.currentTarget.id),s=browsedMovies.find(e=>e.show.id===o);console.log(o),favMovies.splice(s,1),addFavourite()}function addRemoveListener(){const e=document.querySelectorAll(".js-fav-item");for(const o of e)o.addEventListener("click",removeFavourite,removeClass)}function removeClass(e){const o=parseInt(e.currentTarget.id);console.log(o);const s=document.getElementById(""+o);console.log("selected ",s)}getMovie(),btn.addEventListener("click",getMovie);