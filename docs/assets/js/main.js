"use strict";let browsedMovies=[],favMovies=[];const movieList=document.querySelector(".js-list"),favList=document.querySelector(".js-fav"),btn=document.querySelector(".js-btn"),delButton=document.querySelector(".js-delete-all");function getMovie(){const e=document.querySelector(".js-input").value;fetch("//api.tvmaze.com/search/shows?q="+e).then((function(e){return e.json()})).then((function(e){browsedMovies=e,addListItem(),addListener()}))}function addListItem(){movieList.innerHTML="";const e=document.querySelector(".movie"),t=document.querySelector(".js-count");null!==t&&t.remove();const o=document.createElement("p");o.classList.add("js-count");const s=document.createTextNode(""+browsedMovies.length);o.appendChild(s),e.insertBefore(o,movieList),o.addEventListener("click",countGreater);for(let e=0;e<browsedMovies.length;e++){let t="";t+=`<li title="${browsedMovies[e].show.name}"`,t+='class="';const o=parseInt(browsedMovies[e].show.id);t+=void 0===favMovies.find(e=>e.show.id===o)?"":"selected ",t+=`js-movie js-movie${e} movie__list__item" id="${browsedMovies[e].show.id}">`,t+=`<img class="js-movie-img${e} movie__list__img" `,null===browsedMovies[e].show.image?t+='src= "https://via.placeholder.com/210x295/ffffff/666666/?text=Image"':t+="src = "+browsedMovies[e].show.image.medium,t+=` alt="${browsedMovies[e].show.name}" title="${browsedMovies[e].show.name}">`,t+=`<h3 class="movie__list__name">${browsedMovies[e].show.name}</h3>`,t+=`<p class="movie__list__paragraph">${browsedMovies[e].show.premiered}</p>`,t+="</li>",movieList.innerHTML+=t}}function selectFavourite(e){const t=parseInt(e.currentTarget.id);if(void 0===favMovies.find(e=>e.show.id===t)){const e=browsedMovies.find(e=>e.show.id===t);favMovies.push(e),localStorage.setItem("movies",JSON.stringify(favMovies))}else{const e=favMovies.find(e=>e.show.id===t),o=favMovies.indexOf(e);favMovies.splice(o,1),localStorage.setItem("movies",JSON.stringify(favMovies))}addFavourite(),getMovie(),addListItem()}function addListener(){const e=document.querySelectorAll(".js-movie");for(const t of e)t.addEventListener("click",selectFavourite)}function addFavourite(){const e=document.querySelectorAll(".js-fav-item");for(const t of e)t.remove();for(let e=0;e<favMovies.length;e++){const t=document.createElement("li");t.classList.add("js-fav-item"),t.classList.add("js-fav"+e),t.classList.add("favourite__list__item");const o=document.createElement("img");t.appendChild(o),o.classList.add("js-fav-img"+e),o.classList.add("favourite__list__img"),o.setAttribute("alt",""+favMovies[e].show.name),o.setAttribute("title",""+favMovies[e].show.name),null===favMovies[e].show.image?o.src="https://via.placeholder.com/210x295/ffffff/666666/?text=Image":o.src=""+favMovies[e].show.image.medium;const s=document.createElement("h3");t.appendChild(s),s.classList.add("favourite__list__title");const i=document.createTextNode(""+favMovies[e].show.name);s.appendChild(i);const a=document.createElement("button");t.appendChild(a),a.setAttribute("id",""+favMovies[e].show.id),a.classList.add("favourite__list__btn"),a.classList.add("js-delete-btn"),a.setAttribute("title","Borrar");const n=document.createElement("i");a.appendChild(n),n.classList.add("favourite__list__fav"),n.classList.add("fas"),n.classList.add("fa-minus-circle"),favList.appendChild(t)}addRemoveListener()}function removeFavourite(e){const t=parseInt(e.currentTarget.id),o=favMovies.find(e=>e.show.id===t),s=favMovies.indexOf(o);favMovies.splice(s,1),localStorage.setItem("movies",JSON.stringify(favMovies)),e.preventDefault(),addFavourite(),getMovie(),addListItem()}function addRemoveListener(){const e=document.querySelectorAll(".js-delete-btn");for(const t of e)t.addEventListener("click",removeFavourite)}function deleteAll(e){favMovies=[],localStorage.clear(),e.preventDefault(),addFavourite(),getMovie()}function getMoviesFromLocal(){const e=JSON.parse(localStorage.getItem("movies"));null!==e?(favMovies=e,addFavourite()):favMovies=[]}getMoviesFromLocal(),btn.addEventListener("click",getMovie),delButton.addEventListener("click",deleteAll);const evalArray=[2,5,9];function countGreater(){for(const e in evalArray)console.log(evalArray[e]),browsedMovies.length>evalArray[e]?(console.log("en el if"),console.log(`El número de series es mayor que ${evalArray[e]}.`)):console.log(`El número de series es menor que ${evalArray[e]}.`)}